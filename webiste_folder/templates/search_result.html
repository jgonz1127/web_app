{% extends "layout.html" %}


{% block title %} Search Results {% endblock %}

{% block css_path %} 
<link rel="stylesheet" type= "text/css" href="{{ url_for('static', filename='css/search.css')}}">
{% endblock %}
{% block js_path %} <script src="{{ url_for('static', filename='js/search.js')}}"></script> {% endblock %}
{% block menu_items %}
    {% if g.user %}
        <li class="navbar_toggle"> <i class="fa-solid fa-bars fa-fade fa-xl"></i></li> 
        <li class="inner_nav">
                <li> 
                    <button id="inner_navigate_toggle"> Navigate </button>
                    <div id="inner_navigate_links">
                    <li class="inner_content"><a href="#company_synopsis">Company info</a></li>
                    <li class="inner_content"><a href="#analysis">Analysis</a></li>
                    <li class="inner_content"><a href="#calendar">Calendar</a></li>
                    </div>
                </li>               
        </li>
        <li class="link"  title="{{ g.user['username'] }}'s Page"><a href="{{ url_for('route.account') }}" target='_blank'><i class="fa-solid fa-user fa-xl"></i></a></li>
        <li class="link"><a href="{{ url_for('auth.logout') }}" title="logout" target="_blank">logout</a></li>
    {% else %}
        <li class="navbar_toggle"> <i class="fa-solid fa-bars fa-fade fa-xl"></i></li> 
        <li class="inner_nav">
                    <button id="inner_navigate_toggle"> Navigate </button>
                    <div id="inner_navigate_links">
                       <a href="#company_synopsis">Company info</a>
                        <a href="#analysis">Analysis</a>
                        <a href="#calendar">Calendar</a>
                    </div>
        </li>
        <li class="link"><a href="{{ url_for('auth.login') }}" title="login page" target="_blank"><i class="fa-solid fa-circle-user fa-xl"></i></a></li>
    {% endif %}
{% endblock %}
{% block body %}

    <div class="grid_container">
        
        <div id="name_price">
            <img src="{{ url_for('static', filename='webImage.png')}}" alt="company_logo"/>
            <div class="name_price_inner_div">
                <h1 style="font-size:3rem">{{ company_name_to_send }} </h1><br>
                <h2 style="font-size:2rem"> ${{market_price_to_send}}</h2><br>
                <br>
            </div>
        </div>

    <!--add some graphs and js to scroll -->
        <div class="item" id="search_graph">
            <div class="graph_inner_div">
                <div class="arrows prev" onclick="arrow_click('left')"></div>
                <img src='data:image/png;base64,{{data_to_send}}' id="main_image">
                <img src='data:image/png;base64,{{graph2}}'  id="side_image1">
                <img src='data:image/png;base64,{{graph3}}' id="side_image2">

                <div class="arrows next" onclick="arrow_click('right')"></div>
            </div>
        </div>

        <div  class="item" id="company_synopsis" >
            <center><h3> Read About {{company_name_to_send}}</h3></center>
            <hr><br>
            <p > 
                {{company_summary_to_send[0:60]}}
                <span id="summary_dots">...</span>
                <span id="read_more_company">{{company_summary_to_send[60:]}}</span>
            </p>
            <button onclick="read_more_button('summary_dots','read_more_company','company_summary_button')" id="company_summary_button">Read more</button>
        </div>

        <div  class="item" id="company_daily_info">
            <center><h3> Quick Stats</h3></center><hr><br>
            <p>
                <b>Todays High:</b> ${{todays_high_to_send}}<br>
                <b>Todays Low:</b> ${{todays_low_to_send}}<br>
                <b>Market Price:</b>  ${{market_price_to_send}}<br>
                <span id="stats_dots">...</span>
                <span id="read_more_stats">
                <b>Company Sector:</b>  {{company_sector_to_send}}<br> 
                <b>Company Volume:</b>  ${{volume_to_send}}<br> 
                <b>Company Market Cap:</b>  ${{market_cap_to_send}}<br> 
                <b>Company Dividens:</b>  ${{dividend_rate_to_send}}<br> 
                <b>Company Supply:</b>  {{supply_to_send}}<br> 
               <b> Company isin:</b>  {{isin_to_send}}<br> 
               <b> company yield:</b>  ${{yield_to_send}}<br>
                </span>
                <button onclick="read_more_button('stats_dots','read_more_stats','stats_button')" id="stats_button">Read more</button>

            <p>   
            <hr><br>
            <center><h3>Yearly Info</h3></center><hr><br>
            <p>
               <b> 52 Week High:</b>  ${{fifty2_high_to_send}}<br> 
               <b> 52 Week Low:</b>  ${{fifty2_low_to_send}}<br> 
               <b> 52 Week Change:</b>  ${{fifty2_change_to_send}}<br>
            </p>
        </div>



        <div class="item" id="analysis">
            <center><h2>Analysis</h2></center>
            <hr><br>
            <!--
             h_table=[holders_to_send.to_html(classes='data')], h_titles=holders_to_send.columns.values,
            ih_table = [iholders_to_send.to_html(classes='data')], ih_titles= iholders_to_send.columns.values,
            sustainability_table=[sustainability_to_send.to_html(classes='data')], sus_titles=sustainability_to_send.columns.values,
            recommendation_table=[recommendations_to_send.to_html(classes='data')], recomm_titles=recommendations_to_send.columns.values,
            calendar_table=[calendar_to_send.to_html(classes='data')], calendar_titles=calendar_to_send.columns.values,
            -->
            <center><h3>Holder Information</h3></center>
            <p>
                    {% for table in h_table %}
                    {{h_titles[loop.index]}}
                    {{ table|safe }}
                    {% endfor %}
            </p>
            <hr><br>
            
            <center><h3>Institutional Holders Information</h3></center>
                <p>
                    {% for table in ih_table %}
                    {{ih_titles[loop.index]}}
                    {{ table|safe }}
                    {% endfor %}
                </P>
            <hr><br>
            
            <center><h3>sustainability</h3></center>
            <p><pre>{% for table in sustainability_table %}
                    {{sus_titles[loop.index]}}
                    {{ table|safe }}
                    {% endfor %}</pre></p>
            <hr><br>

            <center ><h3>Recommendations</h3></center>
            <p>{% for table in recommendation_table %}
                    {{recomm_titles[loop.index]}}
                    {{ table|safe }}
                    {% endfor %}
            </p>
            <hr><br>
        </div>
        
        <div class="item" id="calendar">
            <center><h3>Calendar</h3></center>
            <p>{% for table in calendar_table %}
                    {{calendar_titles[loop.index]}}
                    {{ table|safe }}
                    {% endfor %}</p>
            <hr><br>
        </div>


         <div class="item" id="footer">
            <footer id="footer_flex_container">
                <h2>Stock Site</h2> 
                <div class="footer_div">
                    <h3>Other Projects</h3>
                    <ul>
                        <li> project link </li>
                    </ul>
                </div>                 
                <div class="footer_div">
                    <h3>Contact us</h3>
                    <ul>
                        <li> email here </li>
                    </ul>
                    </div>            
            </footer>
        </div>
    </div><!--grid_container-->
{% endblock %}















